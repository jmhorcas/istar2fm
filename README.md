# iStar to Variability Model converter
Set of algorithms and scripts to perform a mapping from an i* (iStar) requirements model to a variability model or feature model (FM). 


## Contents
### Algorithms
* **ALG1 and ALG2 (istar2fm.py)**: Mapping algorithms to convert i* models to variability models and partial configurations of variability models (or resolutions).  
* **ALG3 (evolveAgent.py)**: Update an iStar Agent Model with according to the evolution changes made to the associated iStar model.

### Scripts
* **piStar parser (pistarParser.py)**: Script to parser i* models generated with the [PiStar tool](http://www.cin.ufpe.br/~jhcp/pistar/tool/#).  
* **S.P.L.O.T. generator (fm2splot.py)**: Script to convert a variability model in the [S.P.L.O.T.](http://www.splot-research.org/) format (SXFM).  
* **iStar model generator (istarGenerator.py)**: Script to generate random iStar model of a specified size.
* **Algorithms performance evaluation (evaluation.py)**: Script to evaluate the performance of the algorithms, it generate random model of size from 1 up to 50000 elements and calculate averages execution times.

### Core and utils
* **metamodel.py**: It manages metamodels (.ecore) using the pyecore library.  
* **istarModel.py**: It manages i* (iStar) models.  
* **featureModel.py**: It manages feature models (variability models).  
* **configurationFM.py**: It manages a configuration of a feature model.  

### Metamodels
* **metamodels/iStarMetamodel.ecore**: Metamodel of i* 2.0 language based on the official [i* 2.0 metamodel](https://arxiv.org/abs/1605.07767).
* **metamodels/featureModelMetamodel.ecore**: Metamodel of FMs and configurations based on the proposed standards ([CVL](http://caosd.lcc.uma.es/vexgine/about-cvl/) and [EMF](https://projects.eclipse.org/projects/modeling.emft.featuremodel)).  

### Models
* A set of iStar models and the corresponding variability models generated by the algorithms.

### Results
* Statistics files (in .csv) with the results of the performance evaluation of the algorithms.

## Requirements
* [Python 3 or higher](https://www.python.org/)  
* [PyEcore library](https://pyecore.readthedocs.io/en/latest/)  
	```$ pip install pyecore```

	
## How to use

### ALG1 and ALG2 (istar2fm.py)	
Usage:
    ```python istar2fm.py --file <istar-model.xmi>```

Input:
    *<istar-model.xmi>* is the i* model conformed to the i* 2.0 metamodel.

Output:
    *<fm-model-FM.xmi>* is the FM conformed to its metamodel.
    *<fm-model-FMconfig.xmi>* is a partial configuration of the FM.
	
### ALG3 (evolveAgent.py)	
Usage:
    ```python evolveAgent.py --file <istar-model-evolved.xmi>```

Input:
    *<istar-model-evolved.xmi>* is the i* model evolved with the previous configuration of the agents.

Output:
    *<agent-model-EVOLVED.xmi>* is the i* model with the agents updated according the evolved i* model.
	
	
### piStar parser (pistarParser.py)
Usage:
    ```python pistarParser.py --file <istar-model.txt>```

Input:
    *<istar-model.txt>* is the i* model generated with the PiStar tool in JSON format.
	
Output:
    *<istar-model.xmi>* is the i* model conformed to the i* 2.0 metamodel.



### S.P.L.O.T. generator (fm2splot.py)
Usage:
    ```python fm2splot.py --file <fm-model.xmi>```

Input:
    *<fm-model.xml>* is the feature model conformed to its metamodel.

Output:
    *<fm-model-SPLOT.xmi>* is the feature model conformed to the S.P.L.O.T. format (SXFM).

	
### iStar model generator (istarGenerator.py)
Usage:
    ```python istarGenerator.py <actors, roles, agents, goals, tasks, resources, qualities>```

Input:
    *<actors, roles, agents, goals, tasks, resources, qualities>* is a list of integers with the number of elements.
	
Output:
    *<istar-model-GENERATED.xmi>* is the i* model generated conformed to the i* 2.0 metamodel.

### Algorithms performance evaluation (evaluation.py)
Usage:
    ```python evaluation.py
	
Output:
    *<statistics-ALG1.csv>* is the performance statistics file in .csv for the Algorithm 1.
	*<statistics-ALG2.csv>* is the performance statistics file in .csv for the Algorithm 2.
	*<statistics-ALG3.csv>* is the performance statistics file in .csv for the Algorithm 3.
	

## References
* [iStar 2.0 language guide](https://arxiv.org/abs/1605.07767)  
* [piStar tool](http://www.cin.ufpe.br/~jhcp/pistar/tool/#)
* [piStar repository](https://github.com/jhcp/piStar)  
* [S.P.L.O.T.](http://www.splot-research.org/)
* [PyEcore Documentation](https://pyecore.readthedocs.io/en/latest/)  
* [Feature model information](https://en.wikipedia.org/wiki/Feature_model)  



